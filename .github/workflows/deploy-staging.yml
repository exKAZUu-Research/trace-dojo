name: Deploy staging
on:
  workflow_dispatch:
  push:
    branches:
      - main
    paths-ignore:
      - '**.md'
      - '**/docs/**'
concurrency:
  group: ${{ github.workflow }}
  cancel-in-progress: false
jobs:
  deploy:
    uses: exKAZUu-Research/reusable-workflows/.github/workflows/deploy.yml@main
    with:
      ci_label: large
      cpu_arch: X64
      environment: staging
      github_hosted_runner: true
    secrets:
      DOT_ENV: ${{ secrets.DOT_ENV_STAGING }}
      FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
      GCP_SA_KEY_JSON: ${{ secrets.GCP_SA_KEY }}
